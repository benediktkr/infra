- debug:
    var: item
  with_items:
    - dotfiles

- name: clone my dotfiles from bitbucket
  git:
    repo: "{{ dotfiles_repo }}"
    dest: "{{ dotfiles_path }}"
    version: master
    clone: yes
    update: yes
  become_user: "{{ myusername }}"
  ignore_errors: yes

- name: link the most important dotfiles for me
  file:
    src: "{{ dotfiles_path }}/{{ item.src }}"
    dest: "~/{{ item.dest }}"
    state: link
  with_items:
    - "{{ dotfiles }}"
  become_user: "{{ myusername }}"

- name: link the most important dotfiles for root
  file:
    src: "{{ dotfiles_path }}/{{ item.src }}"
    dest: "/root/{{ item.dest }}"
    state: link
  with_items:
    - "{{ dotfiles }}"


