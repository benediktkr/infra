## apt-get update is already run in the common role
- name: ppas
  apt_repository:
    repo: "{{ item }}"
    update_cache: yes
  with_items:
    - ppa:nextcloud-devs/client
    - ppa:kelleyk/emacs
  tags:
    - packages

- name: install apt packages
  apt:
    state: present
    name: "{{ item }}"
  with_items:
    - android-tools-adb
    - android-tools-fastboot
    - chromium-browser
    - emacs26 # Move to common later
    - enigmail
    - filezilla
    - firefox
    - git
    - gnome-raw-thumbnailer
    - gnupg
    - gparted
    - keepassx
    - network-manager-openconnect
    - network-manager-openconnect-gnome
    - network-manager-openvpn
    - network-manager-openvpn-gnome
    - nextcloud-client
    - openvpn
    - python-pip
    - python-pyflakes
    - python3-pip
    - ssh
    - telegram-desktop
    - texlive-full
    - ufraw-batch
    - virtualbox
    - vlc
    - rawtherapee
    - darktable
  tags:
    - packages


# Note: Slack was installed with --classic
- name: install snap packages
  command: snap install {{ item }}
  with_items:
    - slack --classic
    - skype --classic
    - signal-desktop
    - spotify
    - telegram-desktop
  tags:
    - packages

- name: create directory structure in ~
  file:
    path: "~/{{ item }}"
    state: directory
    owner: "{{ myusername }}"
    group: "{{ myusername }}"
    recurse: no
  become_user: "{{ myusername }}"
  with_items:
    - projects
    - video
  ignore_errors: yes
